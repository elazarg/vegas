// Lottery: three players choose tickets; public RNG picks winning ticket.
// Distribution semantics: winner gets full pot (400 wei), losers get 0
type ticket = {0, 1, 2}

join P1() $ 100 P2() $ 100 P3() $ 100;
random RNG() $ 100;

yield P1(t: ticket) P2(t: ticket) P3(t: ticket);

yield RNG(w: ticket);

withdraw {
    P1 -> (P1.t == RNG.w ? 400 : 0);
    P2 -> (P2.t == RNG.w ? 400 : 0);
    P3 -> (P3.t == RNG.w ? 400 : 0);
    RNG -> 0;
}
