// Gas-price threshold auction: miner with hidden threshold, client bids, miner accepts/rejects.
type thr = {1 .. 5}
type bid = {0 .. 8}

join Miner() $ 100 Client() $ 100;

yield Miner(t: hidden thr);
yield Client(b: bid);
yield Miner(accept: bool);

withdraw (Miner.accept && Client.b >= Miner.t) ?
    { Miner  -> Client.b;
      Client -> 10 - Client.b; }
  : { Miner  -> 0;
      Client -> 0; }
