// Simple matching game: A wins if choices differ, B wins if they match
// Distribution semantics: winner gets full pot (2 wei), loser gets 0
join A() $ 1;
join B() $ 1;
yield A(c: hidden bool);
yield B(c: bool);
reveal A(c: bool);
withdraw (A.c == null && B.c == null) ? {A -> 1; B -> 1}
       : (A.c == null) ? {A -> 0; B -> 2}
       : (B.c == null) ? {A -> 2; B -> 0}
       : { A -> (A.c != B.c) ? 2 : 0 ;
           B -> (A.c == B.c) ? 2 : 0 }
